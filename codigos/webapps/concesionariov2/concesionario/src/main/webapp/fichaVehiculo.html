
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./resources/img/logo/Mercedes-Benz_Star_2022.svg.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
    <script src="./scripts.js"></script>
    <title>Ficha Vehículo</title>
</head>
<body>

<nav class="navbar-container">
    <div class="nav-logo-block">
        <img src="./resources/img/logo/Mercedes-Benz_Star_2022.svg.png" alt="concesionario-logo" class="nav-logo">
    </div>
    <div class="nav-nombre-block">
        <span class="nav-nombre"></span>
    </div>
    <div class="menu">
        <a href="./stock.html" class="menu-link">Ver stock</a>
        <a href="./sobreNosotros.html" class="menu-link">Sobre nosotros</a>
        <a href="./cuenta.html" class="menu-link">Cuenta</a>
    </div>
</nav>
<section id="ficha-vehiculo-container">
    <div id="ficha-vehiculo-subcontainer">
        <button class="botones" onclick="window.location.href='./stock.html'">Volver</button>
        <div id="ficha-vehiculo-block">
            <div id="ficha-img">
                <img id="ficha-imagen" class="images" src="./resources/img/mercedes-benz-b-klasse-2023-backgroundless2lowreso.png" alt="ficha vehiculo" style="max-width: 100%;">
            </div>
            <div id="ficha-description-container">
                <div id="ficha-modelo">
                    <h3 id="ficha-modelo-titulo">Modelo</h3>
                    <div id="ficha-stats">
                        <div id="ficha-precio" class="ficha-stat-info">
                            Precio: 
                            <span id="ficha-precio-span">
                                
                            </span>
                            <span> &#8364;</span>
                        </div>
                        <div id="ficha-colores" class="ficha-stat-info">
                            Colores:
                            <div id="ficha-colores-span">
                                
                            </div>
                        </div>
                        <div id="ficha-caballos" class="ficha-stat-info">
                            Caballos:
                            <span id="ficha-caballos-span">
                                
                            </span>
                            <span> CV</span>
                        </div>
                        <div id="ficha-maletero" class="ficha-stat-info">
                            Maletero:
                            <span id="ficha-maletero-span">
                                
                            </span>
                            <span> l</span>
                        </div>
                        <div id="ficha-puertas" class="ficha-stat-info">
                            Puertas:
                            <span id="ficha-puertas-span">
                                
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div style="display:flex;flex-direction: column;">
            Entrar en la cuenta y solicitar cita para verlo
            <button class="botones" style="margin: 0.25em;" onclick="window.location.href='./iniciarSesion.html'">Cuenta</button>
        </div>
        <div id="ficha-desc-container">
            <p id="ficha-desc"></p>
        </div>
    </div>
</section>
<footer class="pie-container">
    <div class="pie-infos">
        <a href="./textosLegales/avisoLegal.html" class="links texto-legal">Aviso legal</a>
        <a href="./textosLegales/politicaPrivacidad.html" class="links texto-legal">Política de privacidad</a>
        <a href="./textosLegales/cookies.html" class="links texto-legal">Cookies</a>
    </div>
    <div id="made-with-love">
        Made with &#10084; by <span style="color: var(--details);">Miguel Zamora</span> 
    </div>
</footer>
<script>

    function cambiarColor (img) {
        document.getElementById("ficha-img").innerHTML = '<img id="ficha-imagen" src="' + img + '" alt="" style="max-width: 100%;">';
    }

    function modificarFichaVehiculo (jsonify) {

        let imagen = (jsonify['imagenDestacada'] == null || jsonify['imagenDestacada'] == "null" || jsonify['imagenDestacada'] == undefined) ? "" : jsonify['imagenDestacada'];
        let modelo = (jsonify['modelo'] === "null" || jsonify['modelo'] == null || jsonify['modelo'] == undefined) ? "" : jsonify['modelo'];
        let precio = jsonify['precio'] == 0 ? "" : jsonify['precio'];
        let colores = (jsonify['colores'] === "null" || jsonify['colores'] == null || jsonify['colores'] == undefined) ? "" : jsonify['colores'];
        let caballos = jsonify['caballos'] == 0 ? "" : jsonify['caballos'];
        let capacidadMaletero = jsonify['maletero'] == 0 ? "" : jsonify['maletero'];
        let puertas = jsonify['puertas'] == 0 ? "" : jsonify['puertas'];
        let descripcion = (jsonify['descripcion'] === "null" || jsonify['descripcion'] == null || jsonify['descripcion'] == undefined) ? "" : jsonify['descripcion'];
        let azul = jsonify['azul'];
        let blanco = jsonify['blanco'];
        let gris = jsonify['gris'];
        let negro = jsonify['negro'];
        let rojo = jsonify['rojo'];
        let funciones = ["ponerAzul", "ponerBlanco", "ponerGris", "ponerNegro", "ponerRojo"];
        let enlacesColores = [azul, blanco, gris, negro, rojo];

        if (modelo == "claseB2023") {
            modelo = "Clase B 2023";
        } else if (modelo == "claseASedan") {
            modelo = "Clase A Sedán";
        } else if (modelo == "claseESedan") {
            modelo = "Clase E Sedán";
        }

        let coloresDivs = "";
        for (let i = 0; i < colores.length; i++) {
            let color = "background:" + colores[i] + ";";
            coloresDivs += '<div class="ficha-color-mod" style="' + color + '" onclick="javascript:cambiarColor(\'' + enlacesColores[i].substring(4, enlacesColores[i].length) + '\')"></div>';
        }

        document.getElementById("ficha-img").innerHTML = '<img id="ficha-imagen" src="' + imagen + '" alt="" style="max-width: 100%;">';
	    document.getElementById("ficha-modelo-titulo").innerHTML = modelo;
	    document.getElementById("ficha-precio-span").innerHTML = precio;
        document.getElementById("ficha-colores-span").innerHTML = coloresDivs; 
	    document.getElementById("ficha-caballos-span").innerHTML = caballos; 
        document.getElementById("ficha-maletero-span").innerHTML = capacidadMaletero;
        document.getElementById("ficha-puertas-span").innerHTML = puertas;  
        document.getElementById("ficha-desc").innerHTML = descripcion;
    }

    window.onload = function () {
        try {
            const parametrosUrl = new URLSearchParams(location.search);
            let parametroModelo = parametrosUrl.get('modelo');
            fetch ("./jsons/vehiculos/" + parametroModelo + ".json")
            .then((response) => response.json())
            .then((json) => modificarFichaVehiculo(json));
        } catch (e) {
            console.log(e);
        }
    }
</script>
</body>
</html>
